{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\SLIIT\\\\Lectures\\\\3rdYear\\\\1stSemester\\\\DS\\\\GroupProject\\\\Test\\\\Test\\\\frontend\\\\src\\\\components\\\\CustomerManagement\\\\Profile\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, Link, useLocation } from 'react-router-dom';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Button } from '@material-ui/core';\nimport { orange, green, red, blue } from '@material-ui/core/colors';\nimport axios from 'axios';\nimport './Profile.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Profile() {\n  _s();\n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const history = useHistory();\n  const location = useLocation(); //getting user data\n\n  useEffect(() => {\n    async function fetchUser() {\n      await axios.get(`http://localhost:8070/customer/${user._id}`).then(res => {\n        //setting user\n        localStorage.setItem(\"user\", JSON.stringify(res.data.result));\n        setUser(JSON.parse(localStorage.getItem('user')));\n      }).catch(error => {\n        alert(\"Failed to fetch item data\");\n      });\n    }\n\n    fetchUser();\n  }, [user._id, location]); //redirecting to update page\n\n  function editCardData() {\n    history.push(`/customer/updateprofile/${user._id}`);\n  } //redirecting to generate report page\n\n\n  function GenerateReport() {\n    history.push(`/customer/report`);\n  } //reset password\n\n\n  async function ResetPassword() {\n    let email = user.email;\n\n    try {\n      await axios.post(\"http://localhost:8070/customer/forgotpassword\", {\n        email\n      });\n      alert(`We have sent a password reset link to ${email}`);\n    } catch (error) {\n      if (error.response.status === 404) {\n        alert(\"Please enter the email you use for registering\");\n      } else {\n        alert(\"Something went wrong\");\n      }\n    }\n  } //delete account\n\n\n  async function deleteAccount() {\n    const config = {\n      headers: {\n        \"content-Type\": \"application/json\",\n        Authorization: `${localStorage.getItem(\"customerAuthToken\")}`\n      }\n    };\n\n    if (window.confirm('Are you sure?\\nThis action cannot be undone')) {\n      await axios.delete(`http://localhost:8070/customer/deleteprofile/${user._id}`, config).then(() => {\n        alert(\"Account deleted successfully\");\n        localStorage.clear();\n        history.push('/customer/signin');\n      }).catch(error => {\n        alert(`Failed to delete the Account`);\n      });\n    }\n  } //logout\n\n\n  async function logout() {\n    localStorage.clear();\n    history.push('/');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_div\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile_div1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pb-2 px-3 d-flex flex-wrap align-items-center justify-content-between\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"My Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xl-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"white-card \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile_img\",\n                children: user.imgUrl === \"\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/avatar.jpg\",\n                  className: \"rounded-circle\",\n                  alt: \"profile pic\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 33\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${user.imgUrl}`,\n                  className: \"rounded-circle\",\n                  alt: \"profile pic\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: user.firstname + ` ` + user.lastname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: user.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                className: \"btn btn-sm btn-primary\",\n                to: `/customer/updateprofile/${user._id}`,\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xl-4 px-4\",\n            children: /*#__PURE__*/_jsxDEV(\"center\", {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                color: \"primary\",\n                variant: \"contained\",\n                className: \"mb-4 mt-4\",\n                fullWidth: true,\n                disableElevation: true,\n                size: \"large\",\n                style: {\n                  backgroundColor: blue[500],\n                  color: 'white'\n                },\n                onClick: logout,\n                endIcon: /*#__PURE__*/_jsxDEV(ExitToAppIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 109\n                }, this),\n                children: \"Log Out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                className: \"mb-4\",\n                fullWidth: true,\n                disableElevation: true,\n                size: \"large\",\n                style: {\n                  backgroundColor: green[400],\n                  color: 'white'\n                },\n                onClick: GenerateReport,\n                endIcon: /*#__PURE__*/_jsxDEV(CloudDownloadIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 119\n                }, this),\n                children: \"Generate Report\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"primary\",\n                variant: \"contained\",\n                className: \"mb-4\",\n                fullWidth: true,\n                disableElevation: true,\n                size: \"large\",\n                style: {\n                  backgroundColor: blue[500],\n                  color: 'white'\n                },\n                onClick: ResetPassword,\n                endIcon: /*#__PURE__*/_jsxDEV(LockIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 116\n                }, this),\n                children: \"Reset Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"secondary\",\n                variant: \"contained\",\n                fullWidth: true,\n                disableElevation: true,\n                size: \"large\",\n                onClick: deleteAccount,\n                endIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 62\n                }, this),\n                children: \"Delete Account\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"homeimg\",\n            src: \"../images/downloadApp1.jpg\",\n            alt: \"download from store\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Profile, \"PlOPreDRAbnncFVvao40DVtRmk8=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["D:/University/SLIIT/Lectures/3rdYear/1stSemester/DS/GroupProject/Test/Test/frontend/src/components/CustomerManagement/Profile/Profile.js"],"names":["React","useEffect","useState","useHistory","Link","useLocation","CloudDownloadIcon","DeleteIcon","LockIcon","ExitToAppIcon","Button","orange","green","red","blue","axios","Profile","user","setUser","JSON","parse","localStorage","getItem","history","location","fetchUser","get","_id","then","res","setItem","stringify","data","result","catch","error","alert","editCardData","push","GenerateReport","ResetPassword","email","post","response","status","deleteAccount","config","headers","Authorization","window","confirm","delete","clear","logout","imgUrl","firstname","lastname","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useHistory, Link, useLocation } from 'react-router-dom';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Button } from '@material-ui/core';\nimport { orange, green, red, blue } from '@material-ui/core/colors';\nimport axios from 'axios';\nimport './Profile.css';\n\n\nfunction Profile() {\n\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n    const history = useHistory();\n    const location = useLocation();\n\n    //getting user data\n    useEffect(() => {\n        async function fetchUser(){\n            await axios.get(`http://localhost:8070/customer/${user._id}`).then((res)=>{\n                //setting user\n                localStorage.setItem(\"user\", JSON.stringify(res.data.result))\n\n                setUser(JSON.parse(localStorage.getItem('user')))\n\n            }).catch((error)=>{\n                alert(\"Failed to fetch item data\")\n            })\n        }\n        fetchUser()\n        \n    },[user._id,location])\n\n    //redirecting to update page\n    function editCardData() {\n        history.push(`/customer/updateprofile/${user._id}`)\n    }\n\n    //redirecting to generate report page\n    function GenerateReport() {\n        history.push(`/customer/report`)\n    }\n    \n    //reset password\n    async function ResetPassword(){\n        let email = user.email\n        try {\n            await axios.post(\"http://localhost:8070/customer/forgotpassword\", {email});\n\n            alert(`We have sent a password reset link to ${email}`);\n        } catch (error) {\n            if(error.response.status === 404){\n                alert(\"Please enter the email you use for registering\")\n            }\n            else{\n                alert(\"Something went wrong\")\n            }\n        }\n    }\n\n    //delete account\n    async function deleteAccount(){\n        const config = {\n            headers: {\n                \"content-Type\": \"application/json\",\n                Authorization: `${localStorage.getItem(\"customerAuthToken\")}`,\n            },\n        };\n\n        if(window.confirm('Are you sure?\\nThis action cannot be undone')){\n            await axios.delete(`http://localhost:8070/customer/deleteprofile/${user._id}`, config).then(() => {\n                alert(\"Account deleted successfully\")\n                localStorage.clear()\n                history.push('/customer/signin')\n            }).catch((error) => {\n                alert(`Failed to delete the Account`)\n            })\n        }\n    }\n\n    //logout\n    async function logout(){\n        localStorage.clear();\n        history.push('/')\n    }\n\n    return (\n        <div className=\"profile_div\">\n        <div className=\"container\">\n            <div className=\"profile_div1\">\n            <div className=\"row\">\n                <div className=\"col-12\">\n                <div className=\"col-1\">\n                </div>\n                    <div className=\"pb-2 px-3 d-flex flex-wrap align-items-center justify-content-between\">\n                        <h2 >My Profile</h2>\n                    </div>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-xl-4\">\n                    <div className=\"white-card \">\n                        <div className=\"profile_img\">\n                            {user.imgUrl === \"\"? \n                                <img src=\"/images/avatar.jpg\" className=\"rounded-circle\" alt=\"profile pic\"/>\n                            :\n                                <img src={`${user.imgUrl}`} className=\"rounded-circle\" alt=\"profile pic\"/>\n                            }\n                        </div>\n                        <h4>{user.firstname +` `+ user.lastname}</h4>\n                        <p>{user.email}</p>\n                        <Link className=\"btn btn-sm btn-primary\" to={`/customer/updateprofile/${user._id}`}>Edit Profile</Link>\n                    </div>\n                </div>\n                \n                <div className=\"col-xl-4 px-4\">\n                    <center>\n                        <Button color=\"primary\" variant=\"contained\" className=\"mb-4 mt-4\" fullWidth disableElevation size=\"large\"\n                            style={{ backgroundColor: blue[500], color: 'white'}} onClick={logout} endIcon={<ExitToAppIcon/>}>\n                            Log Out  \n                        </Button>\n                        <Button variant=\"contained\" className=\"mb-4\" fullWidth disableElevation size=\"large\" \n                            style={{ backgroundColor: green[400], color: 'white' }} onClick={GenerateReport} endIcon={<CloudDownloadIcon/>}>\n                            Generate Report\n                        </Button>\n                        <Button color=\"primary\" variant=\"contained\" className=\"mb-4\" fullWidth disableElevation size=\"large\"\n                            style={{ backgroundColor: blue[500], color: 'white'}} onClick={ResetPassword} endIcon={<LockIcon/>}>\n                            Reset Password\n                        </Button>\n                        <Button color=\"secondary\" variant=\"contained\" fullWidth disableElevation size=\"large\" \n                            onClick={deleteAccount} endIcon={<DeleteIcon/>}>\n                            Delete Account\n                        </Button>\n                    </center>\n                </div>\n\n                <img\n                    className=\"homeimg\"\n                    src=\"../images/downloadApp1.jpg\"\n                    alt=\"download from store\"\n                />\n\n\n            </div> </div>\n        </div></div>\n    )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}