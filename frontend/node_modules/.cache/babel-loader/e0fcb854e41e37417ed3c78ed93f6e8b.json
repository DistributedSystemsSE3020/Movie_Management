{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\SLIIT\\\\Lectures\\\\3rdYear\\\\1stSemester\\\\DS\\\\GroupProject\\\\Test\\\\Test\\\\frontend\\\\src\\\\components\\\\CustomerManagement\\\\SignIn\\\\SignIn.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport GoogleLogin from \"react-google-login\";\nimport axios from \"axios\";\nimport \"./SignIn.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const CLIENT_ID = process.env.REACT_APP_Google_ClientID;\n  const [showPassword, setShowPassword] = useState();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const history = useHistory(); //show hide password\n\n  function handleShowPassword() {\n    setShowPassword(prevShowPassword => !prevShowPassword);\n  }\n\n  async function signIn(event) {\n    event.preventDefault();\n    const config = {\n      headers: {\n        \"content-Type\": \"application/json\"\n      }\n    };\n\n    try {\n      //getting data from backend\n      const {\n        data\n      } = await axios.post(\"http://localhost:8070/customer/signin\", {\n        email,\n        password\n      }, config); //setting the customer authorization token\n\n      localStorage.setItem(\"customerAuthToken\", `Customer ${data.token}`); //setting user\n\n      localStorage.setItem(\"user\", JSON.stringify(data.result));\n      history.push(\"/\");\n    } catch (error) {\n      if (error.response.status === 404) {\n        alert(\"Invalid Email\");\n      } else if (error.response.status === 400) {\n        alert(\"Password Incorrect\");\n      } else {\n        alert(\"Authentication Failed\");\n      }\n    }\n  }\n\n  const googleSuccess = async res => {\n    const result = res === null || res === void 0 ? void 0 : res.profileObj;\n    const token = res === null || res === void 0 ? void 0 : res.tokenId; //setting the customer authorization token\n\n    localStorage.setItem(\"customerAuthToken\", `Customer ${token}`); //setting user\n\n    localStorage.setItem(\"user\", JSON.stringify(result));\n    history.push(\"/\");\n  };\n\n  const googleFailure = error => {\n    alert(\"Something went wrong\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    align: \"center\",\n    className: \"bg_signin\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"homeimg\",\n      src: \"../images/downloadApp9.jpg\",\n      alt: \"download from store\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 16\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-form\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"boxSignIn\",\n          onSubmit: signIn,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"form-h1\",\n            children: \"Customer Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted\",\n            children: \" All your Movie needs at one place!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            id: \"email\",\n            placeholder: \"E-mail\",\n            onChange: event => {\n              setEmail(event.target.value);\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: showPassword ? \"text\" : \"password\",\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"Password\",\n            onChange: event => {\n              setPassword(event.target.value);\n            },\n            handleShowPassword: handleShowPassword,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"showhide\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: handleShowPassword,\n              children: showPassword ? /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this) : /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 50\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            className: \"forgot\",\n            to: \"/customer/forgotpassword\",\n            children: \"Forgot password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-submit-btn button2\",\n            type: \"submit\",\n            value: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted\",\n            children: \"or\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GoogleLogin, {\n            clientId: CLIENT_ID,\n            onSuccess: googleSuccess,\n            onFailure: googleFailure,\n            cookiePolicy: \"single_host_origin\",\n            theme: \"dark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Don't have an account?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/customer/signup\",\n                className: \"signup\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"kVFGKmGInQ4oD6gkIb4CMzbE8Bo=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/University/SLIIT/Lectures/3rdYear/1stSemester/DS/GroupProject/Test/Test/frontend/src/components/CustomerManagement/SignIn/SignIn.js"],"names":["React","useState","Link","useHistory","IconButton","Visibility","VisibilityOff","GoogleLogin","axios","Login","CLIENT_ID","process","env","REACT_APP_Google_ClientID","showPassword","setShowPassword","email","setEmail","password","setPassword","history","handleShowPassword","prevShowPassword","signIn","event","preventDefault","config","headers","data","post","localStorage","setItem","token","JSON","stringify","result","push","error","response","status","alert","googleSuccess","res","profileObj","tokenId","googleFailure","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport GoogleLogin from \"react-google-login\";\nimport axios from \"axios\";\nimport \"./SignIn.css\";\n\nfunction Login() {\n  const CLIENT_ID = process.env.REACT_APP_Google_ClientID;\n\n  const [showPassword, setShowPassword] = useState();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const history = useHistory();\n\n  //show hide password\n  function handleShowPassword() {\n    setShowPassword((prevShowPassword) => !prevShowPassword);\n  }\n\n  async function signIn(event) {\n    event.preventDefault();\n\n    const config = {\n      headers: {\n        \"content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      //getting data from backend\n      const { data } = await axios.post(\n        \"http://localhost:8070/customer/signin\",\n        { email, password },\n        config\n      );\n\n      //setting the customer authorization token\n      localStorage.setItem(\"customerAuthToken\", `Customer ${data.token}`);\n      //setting user\n      localStorage.setItem(\"user\", JSON.stringify(data.result));\n\n      history.push(\"/\");\n    } catch (error) {\n      if (error.response.status === 404) {\n        alert(\"Invalid Email\");\n      } else if (error.response.status === 400) {\n        alert(\"Password Incorrect\");\n      } else {\n        alert(\"Authentication Failed\");\n      }\n    }\n  }\n\n  const googleSuccess = async (res) => {\n    const result = res?.profileObj;\n    const token = res?.tokenId;\n\n    //setting the customer authorization token\n    localStorage.setItem(\"customerAuthToken\", `Customer ${token}`);\n    //setting user\n    localStorage.setItem(\"user\", JSON.stringify(result));\n\n    history.push(\"/\");\n  };\n\n  const googleFailure = (error) => {\n    alert(\"Something went wrong\");\n  };\n\n  return (\n    <div align=\"center\" className=\"bg_signin\">\n      <img\n        className=\"homeimg\"\n        src=\"../images/downloadApp9.jpg\"\n        alt=\"download from store\"\n      />\n      <div className=\"container\" align=\"center\">\n        <br /> <br /> <br />\n        <div className=\"card-form\">\n          <form className=\"boxSignIn\" onSubmit={signIn}>\n            <h1 className=\"form-h1\">Customer Login</h1>\n            <p className=\"text-muted\"> All your Movie needs at one place!</p>\n            <input\n              type=\"email\"\n              name=\"email\"\n              id=\"email\"\n              placeholder=\"E-mail\"\n              onChange={(event) => {\n                setEmail(event.target.value);\n              }}\n              required\n            />\n\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              name=\"password\"\n              id=\"password\"\n              placeholder=\"Password\"\n              onChange={(event) => {\n                setPassword(event.target.value);\n              }}\n              handleShowPassword={handleShowPassword}\n              required\n            />\n            <span className=\"showhide\">\n              <IconButton onClick={handleShowPassword}>\n                {showPassword ? <Visibility /> : <VisibilityOff />}\n              </IconButton>\n            </span>\n\n            <Link className=\"forgot\" to=\"/customer/forgotpassword\">\n              Forgot password?\n            </Link>\n            <input\n              className=\"form-submit-btn button2\"\n              type=\"submit\"\n              value=\"Sign In\"\n            />\n\n            <p className=\"text-muted\">or</p>\n\n            <GoogleLogin\n              clientId={CLIENT_ID}\n              onSuccess={googleSuccess}\n              onFailure={googleFailure}\n              cookiePolicy={\"single_host_origin\"}\n              theme=\"dark\"\n            />\n            <br></br>\n            <br></br>\n            <br></br>\n            <div className=\"text-muted\">\n              <p>\n                Don't have an account?{\" \"}\n                <Link to=\"/customer/signup\" className=\"signup\">\n                  Sign Up\n                </Link>\n              </p>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}