{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\SLIIT\\\\Lectures\\\\3rdYear\\\\1stSemester\\\\DS\\\\GroupProject\\\\Test\\\\Test\\\\frontend\\\\src\\\\components\\\\CustomerManagement\\\\Profile\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, Link, useLocation } from 'react-router-dom';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Button } from '@material-ui/core';\nimport { orange, green, red, blue } from '@material-ui/core/colors';\nimport axios from 'axios';\nimport './Profile.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Profile() {\n  _s();\n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const history = useHistory();\n  const location = useLocation(); //getting user data\n\n  useEffect(() => {\n    async function fetchUser() {\n      await axios.get(`http://localhost:8070/customer/${user._id}`).then(res => {\n        //setting user\n        localStorage.setItem(\"user\", JSON.stringify(res.data.result));\n        setUser(JSON.parse(localStorage.getItem('user')));\n      }).catch(error => {\n        alert(\"Failed to fetch item data\");\n      });\n    }\n\n    fetchUser();\n  }, [user._id, location]); //redirecting to update page\n\n  function editCardData() {\n    history.push(`/customer/updateprofile/${user._id}`);\n  } //redirecting to generate report page\n\n\n  function GenerateReport() {\n    history.push(`/customer/report`);\n  } //reset password\n\n\n  async function ResetPassword() {\n    let email = user.email;\n\n    try {\n      await axios.post(\"http://localhost:8070/customer/forgotpassword\", {\n        email\n      });\n      alert(`We have sent a password reset link to ${email}`);\n    } catch (error) {\n      if (error.response.status === 404) {\n        alert(\"Please enter the email you use for registering\");\n      } else {\n        alert(\"Something went wrong\");\n      }\n    }\n  } //delete account\n\n\n  async function deleteAccount() {\n    const config = {\n      headers: {\n        \"content-Type\": \"application/json\",\n        Authorization: `${localStorage.getItem(\"customerAuthToken\")}`\n      }\n    };\n\n    if (window.confirm('Are you sure?\\nThis action cannot be undone')) {\n      await axios.delete(`http://localhost:8070/customer/deleteprofile/${user._id}`, config).then(() => {\n        alert(\"Account deleted successfully\");\n        localStorage.clear();\n        history.push('/customer/signin');\n      }).catch(error => {\n        alert(`Failed to delete the Account`);\n      });\n    }\n  } //logout\n\n\n  async function logout() {\n    localStorage.clear();\n    history.push('/');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_div\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pb-2 px-3 d-flex flex-wrap align-items-center justify-content-between\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"My Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xl-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"white-card \",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile_img\",\n              children: user.imgUrl === \"\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/images/avatar.jpg\",\n                className: \"rounded-circle\",\n                alt: \"profile pic\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `${user.imgUrl}`,\n                className: \"rounded-circle\",\n                alt: \"profile pic\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: user.firstname + ` ` + user.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              className: \"btn btn-sm btn-primary\",\n              to: `/customer/updateprofile/${user._id}`,\n              children: \"Edit Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xl-4 px-4\",\n          children: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              variant: \"contained\",\n              className: \"mb-4 mt-4\",\n              fullWidth: true,\n              disableElevation: true,\n              size: \"large\",\n              style: {\n                backgroundColor: blue[500],\n                color: 'white'\n              },\n              onClick: logout,\n              endIcon: /*#__PURE__*/_jsxDEV(ExitToAppIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 109\n              }, this),\n              children: \"Log Out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              className: \"mb-4\",\n              fullWidth: true,\n              disableElevation: true,\n              size: \"large\",\n              style: {\n                backgroundColor: green[400],\n                color: 'white'\n              },\n              onClick: GenerateReport,\n              endIcon: /*#__PURE__*/_jsxDEV(CloudDownloadIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 119\n              }, this),\n              children: \"Generate Report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              variant: \"contained\",\n              className: \"mb-4\",\n              fullWidth: true,\n              disableElevation: true,\n              size: \"large\",\n              style: {\n                backgroundColor: blue[500],\n                color: 'white'\n              },\n              onClick: ResetPassword,\n              endIcon: /*#__PURE__*/_jsxDEV(LockIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 116\n              }, this),\n              children: \"Reset Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"secondary\",\n              variant: \"contained\",\n              fullWidth: true,\n              disableElevation: true,\n              size: \"large\",\n              onClick: deleteAccount,\n              endIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 62\n              }, this),\n              children: \"Delete Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Profile, \"PlOPreDRAbnncFVvao40DVtRmk8=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["D:/University/SLIIT/Lectures/3rdYear/1stSemester/DS/GroupProject/Test/Test/frontend/src/components/CustomerManagement/Profile/Profile.js"],"names":["React","useEffect","useState","useHistory","Link","useLocation","CloudDownloadIcon","DeleteIcon","LockIcon","ExitToAppIcon","Button","orange","green","red","blue","axios","Profile","user","setUser","JSON","parse","localStorage","getItem","history","location","fetchUser","get","_id","then","res","setItem","stringify","data","result","catch","error","alert","editCardData","push","GenerateReport","ResetPassword","email","post","response","status","deleteAccount","config","headers","Authorization","window","confirm","delete","clear","logout","imgUrl","firstname","lastname","backgroundColor","color"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,GAAxB,EAA6BC,IAA7B,QAAyC,0BAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;;;AAGA,SAASC,OAAT,GAAmB;AAAA;;AAEf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAACiB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAAhC;AACA,QAAMC,OAAO,GAAGpB,UAAU,EAA1B;AACA,QAAMqB,QAAQ,GAAGnB,WAAW,EAA5B,CAJe,CAMf;;AACAJ,EAAAA,SAAS,CAAC,MAAM;AACZ,mBAAewB,SAAf,GAA0B;AACtB,YAAMV,KAAK,CAACW,GAAN,CAAW,kCAAiCT,IAAI,CAACU,GAAI,EAArD,EAAwDC,IAAxD,CAA8DC,GAAD,IAAO;AACtE;AACAR,QAAAA,YAAY,CAACS,OAAb,CAAqB,MAArB,EAA6BX,IAAI,CAACY,SAAL,CAAeF,GAAG,CAACG,IAAJ,CAASC,MAAxB,CAA7B;AAEAf,QAAAA,OAAO,CAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAAP;AAEH,OANK,EAMHY,KANG,CAMIC,KAAD,IAAS;AACdC,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,OARK,CAAN;AASH;;AACDX,IAAAA,SAAS;AAEZ,GAdQ,EAcP,CAACR,IAAI,CAACU,GAAN,EAAUH,QAAV,CAdO,CAAT,CAPe,CAuBf;;AACA,WAASa,YAAT,GAAwB;AACpBd,IAAAA,OAAO,CAACe,IAAR,CAAc,2BAA0BrB,IAAI,CAACU,GAAI,EAAjD;AACH,GA1Bc,CA4Bf;;;AACA,WAASY,cAAT,GAA0B;AACtBhB,IAAAA,OAAO,CAACe,IAAR,CAAc,kBAAd;AACH,GA/Bc,CAiCf;;;AACA,iBAAeE,aAAf,GAA8B;AAC1B,QAAIC,KAAK,GAAGxB,IAAI,CAACwB,KAAjB;;AACA,QAAI;AACA,YAAM1B,KAAK,CAAC2B,IAAN,CAAW,+CAAX,EAA4D;AAACD,QAAAA;AAAD,OAA5D,CAAN;AAEAL,MAAAA,KAAK,CAAE,yCAAwCK,KAAM,EAAhD,CAAL;AACH,KAJD,CAIE,OAAON,KAAP,EAAc;AACZ,UAAGA,KAAK,CAACQ,QAAN,CAAeC,MAAf,KAA0B,GAA7B,EAAiC;AAC7BR,QAAAA,KAAK,CAAC,gDAAD,CAAL;AACH,OAFD,MAGI;AACAA,QAAAA,KAAK,CAAC,sBAAD,CAAL;AACH;AACJ;AACJ,GAhDc,CAkDf;;;AACA,iBAAeS,aAAf,GAA8B;AAC1B,UAAMC,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAELC,QAAAA,aAAa,EAAG,GAAE3B,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAA0C;AAFvD;AADE,KAAf;;AAOA,QAAG2B,MAAM,CAACC,OAAP,CAAe,6CAAf,CAAH,EAAiE;AAC7D,YAAMnC,KAAK,CAACoC,MAAN,CAAc,gDAA+ClC,IAAI,CAACU,GAAI,EAAtE,EAAyEmB,MAAzE,EAAiFlB,IAAjF,CAAsF,MAAM;AAC9FQ,QAAAA,KAAK,CAAC,8BAAD,CAAL;AACAf,QAAAA,YAAY,CAAC+B,KAAb;AACA7B,QAAAA,OAAO,CAACe,IAAR,CAAa,kBAAb;AACH,OAJK,EAIHJ,KAJG,CAIIC,KAAD,IAAW;AAChBC,QAAAA,KAAK,CAAE,8BAAF,CAAL;AACH,OANK,CAAN;AAOH;AACJ,GApEc,CAsEf;;;AACA,iBAAeiB,MAAf,GAAuB;AACnBhC,IAAAA,YAAY,CAAC+B,KAAb;AACA7B,IAAAA,OAAO,CAACe,IAAR,CAAa,GAAb;AACH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA,2BACA;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,kCACA;AAAK,YAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBADA,eAGI;AAAK,YAAA,SAAS,EAAC,uEAAf;AAAA,mCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAUI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,wBACKrB,IAAI,CAACqC,MAAL,KAAgB,EAAhB,gBACG;AAAK,gBAAA,GAAG,EAAC,oBAAT;AAA8B,gBAAA,SAAS,EAAC,gBAAxC;AAAyD,gBAAA,GAAG,EAAC;AAA7D;AAAA;AAAA;AAAA;AAAA,sBADH,gBAGG;AAAK,gBAAA,GAAG,EAAG,GAAErC,IAAI,CAACqC,MAAO,EAAzB;AAA4B,gBAAA,SAAS,EAAC,gBAAtC;AAAuD,gBAAA,GAAG,EAAC;AAA3D;AAAA;AAAA;AAAA;AAAA;AAJR;AAAA;AAAA;AAAA;AAAA,oBADJ,eAQI;AAAA,wBAAKrC,IAAI,CAACsC,SAAL,GAAiB,GAAjB,GAAqBtC,IAAI,CAACuC;AAA/B;AAAA;AAAA;AAAA;AAAA,oBARJ,eASI;AAAA,wBAAIvC,IAAI,CAACwB;AAAT;AAAA;AAAA;AAAA;AAAA,oBATJ,eAUI,QAAC,IAAD;AAAM,cAAA,SAAS,EAAC,wBAAhB;AAAyC,cAAA,EAAE,EAAG,2BAA0BxB,IAAI,CAACU,GAAI,EAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAgBI;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,iCACI;AAAA,oCACI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAC,SAAd;AAAwB,cAAA,OAAO,EAAC,WAAhC;AAA4C,cAAA,SAAS,EAAC,WAAtD;AAAkE,cAAA,SAAS,MAA3E;AAA4E,cAAA,gBAAgB,MAA5F;AAA6F,cAAA,IAAI,EAAC,OAAlG;AACI,cAAA,KAAK,EAAE;AAAE8B,gBAAAA,eAAe,EAAE3C,IAAI,CAAC,GAAD,CAAvB;AAA8B4C,gBAAAA,KAAK,EAAE;AAArC,eADX;AAC0D,cAAA,OAAO,EAAEL,MADnE;AAC2E,cAAA,OAAO,eAAE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,sBADpF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,WAAhB;AAA4B,cAAA,SAAS,EAAC,MAAtC;AAA6C,cAAA,SAAS,MAAtD;AAAuD,cAAA,gBAAgB,MAAvE;AAAwE,cAAA,IAAI,EAAC,OAA7E;AACI,cAAA,KAAK,EAAE;AAAEI,gBAAAA,eAAe,EAAE7C,KAAK,CAAC,GAAD,CAAxB;AAA+B8C,gBAAAA,KAAK,EAAE;AAAtC,eADX;AAC4D,cAAA,OAAO,EAAEnB,cADrE;AACqF,cAAA,OAAO,eAAE,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,sBAD9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,eASI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAC,SAAd;AAAwB,cAAA,OAAO,EAAC,WAAhC;AAA4C,cAAA,SAAS,EAAC,MAAtD;AAA6D,cAAA,SAAS,MAAtE;AAAuE,cAAA,gBAAgB,MAAvF;AAAwF,cAAA,IAAI,EAAC,OAA7F;AACI,cAAA,KAAK,EAAE;AAAEkB,gBAAAA,eAAe,EAAE3C,IAAI,CAAC,GAAD,CAAvB;AAA8B4C,gBAAAA,KAAK,EAAE;AAArC,eADX;AAC0D,cAAA,OAAO,EAAElB,aADnE;AACkF,cAAA,OAAO,eAAE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,sBAD3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATJ,eAaI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAC,WAAd;AAA0B,cAAA,OAAO,EAAC,WAAlC;AAA8C,cAAA,SAAS,MAAvD;AAAwD,cAAA,gBAAgB,MAAxE;AAAyE,cAAA,IAAI,EAAC,OAA9E;AACI,cAAA,OAAO,EAAEK,aADb;AAC4B,cAAA,OAAO,eAAE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,sBADrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADJ;AAmDH;;GA/HQ7B,O;UAGWb,U,EACCE,W;;;KAJZW,O;AAiIT,eAAeA,OAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useHistory, Link, useLocation } from 'react-router-dom';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Button } from '@material-ui/core';\nimport { orange, green, red, blue } from '@material-ui/core/colors';\nimport axios from 'axios';\nimport './Profile.css';\n\n\nfunction Profile() {\n\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n    const history = useHistory();\n    const location = useLocation();\n\n    //getting user data\n    useEffect(() => {\n        async function fetchUser(){\n            await axios.get(`http://localhost:8070/customer/${user._id}`).then((res)=>{\n                //setting user\n                localStorage.setItem(\"user\", JSON.stringify(res.data.result))\n\n                setUser(JSON.parse(localStorage.getItem('user')))\n\n            }).catch((error)=>{\n                alert(\"Failed to fetch item data\")\n            })\n        }\n        fetchUser()\n        \n    },[user._id,location])\n\n    //redirecting to update page\n    function editCardData() {\n        history.push(`/customer/updateprofile/${user._id}`)\n    }\n\n    //redirecting to generate report page\n    function GenerateReport() {\n        history.push(`/customer/report`)\n    }\n    \n    //reset password\n    async function ResetPassword(){\n        let email = user.email\n        try {\n            await axios.post(\"http://localhost:8070/customer/forgotpassword\", {email});\n\n            alert(`We have sent a password reset link to ${email}`);\n        } catch (error) {\n            if(error.response.status === 404){\n                alert(\"Please enter the email you use for registering\")\n            }\n            else{\n                alert(\"Something went wrong\")\n            }\n        }\n    }\n\n    //delete account\n    async function deleteAccount(){\n        const config = {\n            headers: {\n                \"content-Type\": \"application/json\",\n                Authorization: `${localStorage.getItem(\"customerAuthToken\")}`,\n            },\n        };\n\n        if(window.confirm('Are you sure?\\nThis action cannot be undone')){\n            await axios.delete(`http://localhost:8070/customer/deleteprofile/${user._id}`, config).then(() => {\n                alert(\"Account deleted successfully\")\n                localStorage.clear()\n                history.push('/customer/signin')\n            }).catch((error) => {\n                alert(`Failed to delete the Account`)\n            })\n        }\n    }\n\n    //logout\n    async function logout(){\n        localStorage.clear();\n        history.push('/')\n    }\n\n    return (\n        <div className=\"profile_div\">\n        <div className=\"\">\n            <div className=\"row\">\n                <div className=\"col-12\">\n                <div className=\"col-1\">\n                </div>\n                    <div className=\"pb-2 px-3 d-flex flex-wrap align-items-center justify-content-between\">\n                        <h2 >My Profile</h2>\n                    </div>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-xl-4\">\n                    <div className=\"white-card \">\n                        <div className=\"profile_img\">\n                            {user.imgUrl === \"\"? \n                                <img src=\"/images/avatar.jpg\" className=\"rounded-circle\" alt=\"profile pic\"/>\n                            :\n                                <img src={`${user.imgUrl}`} className=\"rounded-circle\" alt=\"profile pic\"/>\n                            }\n                        </div>\n                        <h4>{user.firstname +` `+ user.lastname}</h4>\n                        <p>{user.email}</p>\n                        <Link className=\"btn btn-sm btn-primary\" to={`/customer/updateprofile/${user._id}`}>Edit Profile</Link>\n                    </div>\n                </div>\n                \n                <div className=\"col-xl-4 px-4\">\n                    <center>\n                        <Button color=\"primary\" variant=\"contained\" className=\"mb-4 mt-4\" fullWidth disableElevation size=\"large\"\n                            style={{ backgroundColor: blue[500], color: 'white'}} onClick={logout} endIcon={<ExitToAppIcon/>}>\n                            Log Out  \n                        </Button>\n                        <Button variant=\"contained\" className=\"mb-4\" fullWidth disableElevation size=\"large\" \n                            style={{ backgroundColor: green[400], color: 'white' }} onClick={GenerateReport} endIcon={<CloudDownloadIcon/>}>\n                            Generate Report\n                        </Button>\n                        <Button color=\"primary\" variant=\"contained\" className=\"mb-4\" fullWidth disableElevation size=\"large\"\n                            style={{ backgroundColor: blue[500], color: 'white'}} onClick={ResetPassword} endIcon={<LockIcon/>}>\n                            Reset Password\n                        </Button>\n                        <Button color=\"secondary\" variant=\"contained\" fullWidth disableElevation size=\"large\" \n                            onClick={deleteAccount} endIcon={<DeleteIcon/>}>\n                            Delete Account\n                        </Button>\n                    </center>\n                </div>\n            </div>                                \n        </div></div>\n    )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}